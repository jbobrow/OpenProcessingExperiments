
String states[]= { 
  "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY", "DC"
};

int uspop[]= {
  76212168, 92228496, 106021537, 123202624, 132164569, 151325798, 179323175, 203211926, 226545805, 248709873, 281421906
};

int data[][] = {
  {
    1828697, 2138093, 2348174, 2646248, 2832961, 3061743, 3266740, 3444165, 3893888, 4040587, 4447100
  }
  , 
  {
    63592, 64356, 55036, 59278, 72524, 128643, 226167, 300382, 401851, 550043, 626932
  }
  , 
  {
    122931, 204354, 334162, 435573, 499261, 749587, 1302161, 1770900, 2718215, 3665228, 5130632
  }
  , 
  {
    1311564, 1574449, 1752204, 1854482, 1949387, 1909511, 1786272, 1923295, 2286435, 2350725, 2673400
  }
  , 
  {
    1485053, 2377549, 3426861, 5677251, 6907387, 10586223, 15717204, 19953134, 23667902, 29760021, 33871648
  }
  , 
  {
    539700, 799024, 939629, 1035791, 1123296, 1325089, 1753947, 2207259, 2889964, 3294394, 4301261
  }
  , 
  {
    908420, 1114756, 1380631, 1606903, 1709242, 2007280, 2535234, 3031709, 3107576, 3287116, 3405565
  }
  , 
  {
    184735, 202322, 223003, 238380, 266505, 318085, 446292, 548104, 594338, 666168, 783600
  }
  , 
  {
    528542, 752619, 968470, 1468211, 1897414, 2771305, 4951560, 6789443, 9746324, 12937926, 15982378
  }
  , 
  {
    2216331, 2609121, 2895832, 2908506, 3123723, 3444578, 3943116, 4589575, 5463105, 6478216, 8186453
  }
  , 
  {
    154001, 191874, 255881, 368300, 422770, 499794, 632772, 768561, 964691, 1108229, 1211537
  }
  , 
  {
    161772, 325594, 431866, 445032, 524873, 588637, 667191, 712567, 943935, 1006749, 1293953
  }
  , 
  {
    4821550, 5638591, 6485280, 7630654, 7897241, 8712176, 10081158, 11113976, 11426518, 11430602, 12419293
  }
  , 
  {
    2516462, 2700876, 2930390, 3238503, 3427796, 3934224, 4662498, 5193669, 5490224, 5544159, 6080485
  }
  , 
  {
    2231853, 2224771, 2404021, 2470939, 2538268, 2621073, 2757537, 2824376, 2913808, 2776755, 2926324
  }
  , 
  {
    1470495, 1690949, 1769257, 1880999, 1801028, 1905299, 2178611, 2246578, 2363679, 2477574, 2688418
  }
  , 
  {
    2147174, 2289905, 2416630, 2614589, 2845627, 2944806, 3038156, 3218706, 3660777, 3685296, 4041769
  }
  , 
  {
    1381625, 1656388, 1798509, 2101593, 2363880, 2683516, 3257022, 3641306, 4205900, 4219973, 4468976
  }
  , 
  {
    694466, 742371, 768014, 797423, 847226, 913774, 969265, 992048, 1124660, 1227928, 1274923
  }
  , 
  {
    1188044, 1295346, 1449661, 1631526, 1821244, 2343001, 3100689, 3922399, 4216975, 4781468, 5296486
  }
  , 
  {
    2805346, 3366416, 3852356, 4249614, 4316721, 4690514, 5148578, 5689170, 5737037, 6016425, 6349097
  }
  , 
  {
    2420982, 2810173, 3668412, 4842325, 5256106, 6371766, 7823194, 8875083, 9262078, 9295297, 9938444
  }
  , 
  {
    1751394, 2075708, 2387125, 2563953, 2792300, 2982483, 3413864, 3804971, 4075970, 4375099, 4919479
  }
  , 
  {
    1551270, 1797114, 1790618, 2009821, 2183796, 2178914, 2178141, 2216912, 2520638, 2573216, 2844658
  }
  , 
  {
    3106665, 3293335, 3404055, 3629367, 3784664, 3954653, 4319813, 4676501, 4916686, 5117073, 5595211
  }
  , 
  {
    243329, 376053, 548889, 537606, 559456, 591024, 674767, 694409, 786690, 799065, 902195
  }
  , 
  {
    1066300, 1192214, 1296372, 1377963, 1315834, 1325510, 1411330, 1483493, 1569825, 1578385, 1711263
  }
  , 
  {
    42335, 81875, 77407, 91058, 110247, 160083, 285278, 488738, 800493, 1201833, 1998257
  }
  , 
  {
    411588, 430572, 443083, 465293, 491524, 533242, 606921, 737681, 920610, 1109252, 1235786
  }
  , 
  {
    1883669, 2537167, 3155900, 4041334, 4160165, 4835329, 6066782, 7168164, 7364823, 7730188, 8414350
  }
  , 
  {
    195310, 327301, 360350, 423317, 531818, 681187, 951023, 1016000, 1302894, 1515069, 1819046
  }
  , 
  {
    7268894, 9113614, 10385227, 12588066, 13479142, 14830192, 16782304, 18236967, 17558072, 17990455, 18976457
  }
  , 
  {
    1893810, 2206287, 2559123, 3170276, 3571623, 4061929, 4556155, 5082059, 5881766, 6628637, 8049313
  }
  , 
  {
    319146, 577056, 646872, 680845, 641935, 619636, 632446, 617761, 652717, 638800, 642200
  }
  , 
  {
    4157545, 4767121, 5759394, 6646697, 6907612, 7946627, 9706397, 10652017, 10797630, 10847115, 11353140
  }
  , 
  {
    790391, 1657155, 2028283, 2396040, 2336434, 2233351, 2328284, 2559229, 3025290, 3145585, 3450654
  }
  , 
  {
    413536, 672765, 783389, 953786, 1089684, 1521341, 1768687, 2091385, 2633105, 2842321, 3421399
  }
  , 
  {
    6302115, 7665111, 8720017, 9631350, 9900180, 10498012, 11319366, 11793909, 11863895, 11881643, 12281054
  }
  , 
  {
    428556, 542610, 604397, 687497, 713346, 791896, 859488, 946725, 947154, 1003464, 1048319
  }
  , 
  {
    1340316, 1515400, 1683724, 1738765, 1899804, 2117027, 2382594, 2590516, 3121820, 3486703, 4012012
  }
  , 
  {
    401570, 583888, 636547, 692849, 642961, 652740, 680514, 665507, 690768, 696004, 754844
  }
  , 
  {
    2020616, 2184789, 2337885, 2616556, 2915841, 3291718, 3567089, 3923687, 4591120, 4877185, 5689283
  }
  , 
  {
    3048710, 3896542, 4663228, 5824715, 6414824, 7711194, 9579677, 11196730, 14229191, 16986510, 20851820
  }
  , 
  {
    276749, 373351, 449396, 507847, 550310, 688862, 890627, 1059273, 1461037, 1722850, 2233169
  }
  , 
  {
    343641, 355956, 352428, 359611, 359231, 377747, 389881, 444330, 511456, 562758, 608827
  }
  , 
  {
    1854184, 2061612, 2309187, 2421851, 2677773, 3318680, 3966949, 4648494, 5346818, 6187358, 7078515
  }
  , 
  {
    518103, 1141990, 1356621, 1563396, 1736191, 2378963, 2853214, 3409169, 4132156, 4866692, 5894121
  }
  , 
  {
    958800, 1221119, 1463701, 1729205, 1901974, 2005552, 1860421, 1744237, 1949644, 1793477, 1808344
  }
  , 
  {
    2069042, 2333860, 2632067, 2939006, 3137587, 3434575, 3951777, 4417731, 4705767, 4891769, 5363675
  }
  , 
  {
    92531, 145965, 194402, 225565, 250742, 290529, 330066, 332416, 469557, 453588, 493782
  }
  , 
  {
    278718, 331069, 437571, 486869, 663091, 802178, 763956, 756510, 638333, 606900, 572059
  }
};

int frame;
PShape usa;

void setup() {
  size(950, 600);
  // The file Blank_US_Map.svg can be found at Wikimedia Commons
  usa = loadShape("http://upload.wikimedia.org/wikipedia/commons/3/32/Blank_US_Map.svg");
  smooth(); // Improves the drawing quality of the SVG
  frameRate(1);
  frame=0;
  colorMode(HSB);
}

void draw() {
  background(255);
  // Draw the full map
  shape(usa, 0, 0);
  for (int i = 0; i < data.length-1; i++) {
    PShape state = usa.getChild(states[i]);
    // Disable the colors found in the SVG file
    state.disableStyle();
    // Set our own coloring
    println(i+" " + frame);
    fill(255.0*data[i][frame]/uspop[frame]*7.0, 255, 255);
    noStroke();
    // Draw a single state
    shape(state, 0, 0);
  }
  text(frame*10+1900,10,10);
  text(data[4][frame]/uspop[frame]*5.0,10,20);
  for(int i = 0; i < 170; i++){
    stroke(i/200.0*255,255,255);
    line(width-50,height-i,width,height-i);
  }
  frame++;
  if (frame>10) {
    frame=0;
  }
}



